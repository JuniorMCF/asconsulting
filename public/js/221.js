"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[221],{2293:(t,a,e)=>{e.d(a,{Z:()=>n});const s={data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"sky",width:400,zIndex:200,noconfirm:!1}}},methods:{open:function(t,a,e){var s=this;return this.dialog=!0,this.title=t,this.message=a,this.options=Object.assign(this.options,e),new Promise((function(t,a){s.resolve=t,s.reject=a}))},agree:function(){this.resolve(!0),this.dialog=!1},cancel:function(){this.resolve(!1),this.dialog=!1}}};const n=(0,e(1900).Z)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-dialog",{style:{zIndex:t.options.zIndex},attrs:{opacity:"0.3","max-width":t.options.width,persistent:""},on:{keydown:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"])?null:t.cancel.apply(null,arguments)}},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[e("v-card",[e("v-toolbar",{attrs:{color:t.options.color,dense:"",flat:""}},[e("v-toolbar-title",{staticClass:"text-body-2 font-weight-bold white--text"},[t._v("\n        "+t._s(t.title)+"\n      ")])],1),t._v(" "),e("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!t.message,expression:"!!message"}],staticClass:"pa-4 black--text text-justify",domProps:{innerHTML:t._s(t.message)}}),t._v(" "),e("v-card-actions",{staticClass:"pt-3"},[e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"body-2 font-weight-bold text-normal rounded-0",attrs:{color:t.options.color,outlined:""},nativeOn:{click:function(a){return t.agree.apply(null,arguments)}}},[t._v("Aceptar")]),t._v(" "),t.options.noconfirm?t._e():e("v-btn",{staticClass:"body-2 font-weight-bold text-normal rounded-0",attrs:{color:"grey",text:""},nativeOn:{click:function(a){return t.cancel.apply(null,arguments)}}},[t._v("Cancelar")])],1)],1)],1)}),[],!1,null,null,null).exports},4221:(t,a,e)=>{e.r(a),e.d(a,{default:()=>o});var s=e(9669),n=e.n(s);const i={data:function(){return{categorias:[],headers:[{text:"Imagen",align:"left",sortable:!1,value:"foto"},{text:"Nombre",value:"nombre"},{text:"Entradas",value:"entrys"},{text:" ",align:"right",value:"actions",sortable:!1}],options:[{icon:"mdi-trash-can",title:"Eliminar"}]}},mounted:function(){this.setActualPage(),this.getData()},methods:{setActualPage:function(){this.$store.dispatch("app/saveActualPage","Categorías")},createNewCategory:function(){this.$router.push({path:"/admin/categorias/nuevo"})},editItem:function(t){this.$router.push({name:"edit-categoria-blog",params:{id:t.id}})},OnClickOption:function(t,a){var e=this;if("Eliminar"===t.title)this.$refs.confirmDialog.open("Eliminar categoría","¿Está seguro que quiere eliminar esta categoría?").then((function(t){if(t){var s=new FormData;s.append("categoria_id",a.id),n()({method:"post",url:"/api/oauth/category/delete",data:s,headers:{Authorization:"Bearer "+e.$store.state.auth.token}}).then((function(t){Vue.$toast.info("Categoría eliminada"),e.getData()})).catch((function(t){console.log(t)}))}})).catch((function(t){}))},getData:function(){var t=this;n()({method:"get",url:"/api/oauth/all-categorys",headers:{Authorization:"Bearer "+this.$store.state.auth.token}}).then((function(a){t.categorias=a.data})).catch((function(t){console.log(t)}))}},computed:{actualPage:function(){return this.$store.state.app.actual_page},totaEntradas:function(){var t=0;for(var a in this.categorias)t+=this.categorias[a].entrys.length;return t}},components:{ConfirmDialog:e(2293).Z}};const o=(0,e(1900).Z)(i,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("v-card-title",{staticClass:"font-weight-bold px-md-10 px-3"},[t._v("\n        "+t._s(t.actualPage)+"\n        "),e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"sky white--text text-normal rounded-xl ekevation-1",on:{click:function(a){return a.preventDefault(),t.createNewCategory()}}},[e("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("Crear nueva categoría\n        ")],1)],1),t._v(" "),e("v-container",{staticClass:"pa-0 ma-0 px-md-10 px-3",attrs:{fluid:""}},[e("v-row",{staticClass:"pa-0 ma-0"},[e("v-col",{staticClass:"pa-0 ma-0 col-12"},[e("v-card-text",{staticClass:"px-0"},[e("span",{staticClass:"title font-weight-bold subtitle-1"},[t._v("Todas las Entradas")]),t._v(" "),e("p",{staticClass:"caption ma-0"},[t._v("Este es el feed principal del blog que muestra todas tus entradas.")])])],1),t._v(" "),e("v-col",[t._v("TODAS")]),t._v(" "),e("v-col",[t._v(t._s(t.totaEntradas)+" entradas")])],1),t._v(" "),e("v-divider",{attrs:{horizontal:""}}),t._v(" "),e("v-row",{staticClass:"pa-0 ma-0"},[e("v-col",{staticClass:"col-12 pa-0 ma-0"},[e("v-data-table",{staticClass:"elevation-0 px-0 rounded-0",attrs:{headers:t.headers,items:t.categorias,"sort-by":"calories"},scopedSlots:t._u([{key:"item.foto",fn:function(a){var s=a.item;return[e("div",{staticClass:"pa-2"},[s.foto?e("v-img",{attrs:{src:s.foto,height:"60",width:"42"}}):e("div",{staticClass:"gray lighten-5 rounded-lg align-center justify-center d-flex",staticStyle:{width:"60px",height:"60px"}},[e("v-btn",{staticClass:"elevation-0 disable-events",attrs:{fab:"",color:"white","x-small":""}},[e("v-icon",{attrs:{color:"sky"}},[t._v("mdi-image-outline")])],1)],1)],1)]}},{key:"item.entrys",fn:function(a){var s=a.item;return[e("span",[t._v(t._s(s.entrys.length))])]}},{key:"top",fn:function(){return[e("v-card-text",{staticClass:"px-0 d-flex flex-wrap",attrs:{flat:""}},[e("v-toolbar-title",{staticClass:"px-0 subtitle-1 font-weight-bold"},[e("span",[t._v("Categorías")]),t._v(" "),e("p",{staticClass:"caption ma-0"},[t._v("Edita las categorías para configurar la URL, SEO e imagen que compartirás en las redes sociales.")])]),t._v(" "),e("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t._v(" "),e("v-spacer")],1)]},proxy:!0},{key:"item.actions",fn:function(a){var s=a.item;return[e("v-btn",{staticClass:"mr-2 rounded-xl text-normal white--text elevation-1",attrs:{color:"sky"},on:{click:function(a){return t.editItem(s)}}},[t._v("editar")]),t._v(" "),e("v-menu",{attrs:{bottom:"",left:""},scopedSlots:t._u([{key:"activator",fn:function(a){var s=a.on,n=a.attrs;return[e("v-btn",t._g(t._b({staticClass:"elevation-0 sky--text",attrs:{dark:"",icon:"",text:"",fab:"","x-small":""}},"v-btn",n,!1),s),[e("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[t._v(" "),e("v-list",{staticClass:"py-0"},t._l(t.options,(function(a,n){return e("v-list-item",{key:"options"+n,attrs:{link:""},on:{click:function(e){return e.preventDefault(),t.OnClickOption(a,s)}}},[e("v-list-item-title",{staticClass:"caption"},[e("v-icon",{attrs:{small:"",left:""}},[t._v(t._s(a.icon))]),t._v("\n                                        "+t._s(a.title)+"\n                                    ")],1),t._v(" "),3===n?e("v-divider",{attrs:{horizontal:""}}):t._e()],1)})),1)],1)]}},{key:"no-data",fn:function(){return[e("span",[t._v("No hay publicaciones disponibles")])]},proxy:!0}])})],1)],1)],1),t._v(" "),e("ConfirmDialog",{ref:"confirmDialog"})],1)}),[],!1,null,null,null).exports}}]);